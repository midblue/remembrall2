(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{313:function(t,e,n){var content=n(337);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("20463f52",content,!0,{sourceMap:!1})},320:function(t,e,n){"use strict";n.r(e);n(86),n(87),n(204),n(14),n(25),n(51),n(335);var o=n(321),r=n(310),c=n(205),d=18e5,h={ok:4,hard:1,again:.1},l=[300,3e4],v={components:{Card:o.default,AutoSpeaker:r.default},props:{reverse:{},front:{},back:{},id:{},set:{},timeMod:{default:0},nextReview:{default:0},totalReviews:{default:0},imageURL:{},examples:{},created:{default:function(){return(new Date).getTime()}},ok:{default:0},again:{default:0}},data:function(){return{msToString:c.msToString,showBack:!1,startedCardTime:new Date,revealedBackTime:new Date,averageTime:7e3,reviewsSoFar:0,metaDown:!1,textToSpeak:"",isFirefox:navigator.userAgent.toLowerCase().includes("firefox")}},computed:{settings:function(){var t,e=this;return null===(t=this.$store.state.setList)||void 0===t?void 0:t.find((function(s){return s.id===e.$store.state.currentSetId})).settings},isStudying:function(){return"study"===this.$store.state.appState},isEditing:function(){return"editCard"===this.$store.state.appState},isMobile:function(){return this.$store.state.isMobile},isEditingText:function(){return this.$store.state.isEditingText},isNewCard:function(){return!this.totalReviews||0===this.totalReviews},spokenLanguage:function(){return this.settings.autoSpeak?this.isStudying&&this.showBack?this.settings.languageTools:"en":this.settings.languageTools},timeBonuses:function(){return{ok:this.getTimeBonus("ok"),hard:this.getTimeBonus("hard"),again:this.getTimeBonus("again")}}},watch:{id:function(){this.startedCardTime=new Date,this.showBack=!1,this.settings.autoSpeakFront&&(this.textToSpeak=(this.reverse?this.back:this.front).replace(/\n.*/g,""));var t=this.$el.getBoundingClientRect().top+window.scrollY-10;t>window.scrollY+100||window.scrollTo(0,t)}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),this.settings.autoSpeakFront&&(this.textToSpeak=(this.reverse?this.back:this.front).replace(/\n.*/g,""))},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},methods:{showBackAction:function(){this.showBack=!0,this.revealedBackTime=new Date;var t=this.$refs.card.$el.getBoundingClientRect(),e=t.top+window.scrollY+t.height-window.innerHeight+(this.isMobile?70:120);e<=0||e<window.scrollY||window.scrollTo(0,e)},answer:function(t){"loading"===this.imageURL&&this.$store.commit("updateCard",{id:this.id,imageURL:null}),this.showBack=!1,this.reviewsSoFar++;var e=this.revealedBackTime-this.startedCardTime,n=e<l[0]||e>l[1];n||(this.averageTime=this.averageTime*((this.reviewsSoFar-1)/this.reviewsSoFar)+e*(1/this.reviewsSoFar));var o={};o.answerTime=n?0:1-(e-l[0])/l[1];o.maturity=this.totalReviews>30?1:this.totalReviews/30;var r=.2*(this.ok||0)/(this.again||1);o.successRatio=r>1?1:r;var h=this.front.length+this.back.length-5;h<0&&(h=0);o.length=h>40?1:h/40;var v={answerTime:.4,maturity:.25,successRatio:.25,length:.1};console.log("base time mod:",Object(c.msToString)(this.timeBonuses[t]));var f=0;for(var m in o)console.log(m+" bonus:",(100*o[m]).toFixed(0)+"% (+"+(o[m]*v[m]*100).toFixed(0)+"% adjusted)"),f+=o[m]*v[m];console.log("final bonus multiplier:",f);var w=this.timeBonuses[t]/2+this.timeBonuses[t]*f;w=Math.floor(w),console.log("pre-overlong-scaled time mod:",Object(c.msToString)(w)),(w=Math.floor(w*(-1*w/3e12+1)))<-1e3&&(w=3e12),w<1&&(w=1),"again"!==t&&w<d&&(w=d);var k=36e6;this.settings.oncePerDay&&w<k&&(w=k),console.log("old time mod:",Object(c.msToString)(this.timeMod)),console.log("new time mod:",Object(c.msToString)(w)),console.log("");var _=new Date(Date.now()+w).getTime(),y=this.totalReviews+1,T=this.again+("again"===t?1:0),S=y-T;this.$store.commit("studyCard",{id:this.id,lastStudied:Date.now(),timeMod:w,nextReview:_,totalReviews:y,ok:S,again:T}),this.$emit("done",w)},getTimeBonus:function(t){var e=(!this.timeMod||isNaN(this.timeMod)?0:this.timeMod)*h[t]*(this.settings.reviewIntervalMultiplier||1);"again"===t&&(e=0);var n=1-Math.min(.8,(Date.now()-(this.nextReview||Date.now()))/2592e6);return"again"===t&&console.log("overdue multiplier:",n.toFixed(2)),e*=n,"again"!==t&&e<d&&(e=d),e},keyDown:function(t){var e=this;"Control"===t.key&&(this.metaDown=!0),"Meta"===t.key?this.metaDown=!0:"i"===t.key&&this.metaDown&&(this.$store.commit("updateCard",{id:this.id,imageURL:"loading"}),Object(c.getRandomImage)(this.front||this.back).then((function(image){image&&e.$store.commit("updateCard",{id:e.id,imageURL:image})}))),this.isStudying&&!this.isEditingText&&("1"===t.key&&this.showBack&&this.answer("again"),"2"===t.key&&this.showBack?this.answer("hard"):" "===t.key||"Enter"===t.key?(t.preventDefault(),t.stopPropagation(),this.showBack?this.answer("ok"):this.showBackAction()):"3"===t.key&&this.showBack?this.answer("ok"):"p"===t.key&&this.$emit("postpone"))},keyUp:function(t){"Control"===t.key&&(this.metaDown=!1),"Meta"===t.key&&(this.metaDown=!1)}}},f=(n(336),n(49)),component=Object(f.a)(v,(function(){var t=this,e=t._self._c;return e("div",[t.settings.languageTools?e("AutoSpeaker",{attrs:{text:t.textToSpeak,language:t.spokenLanguage}}):t._e(),t._v(" "),e("Card",{ref:"card",staticClass:"card",attrs:{id:t.id,front:t.front,back:t.back,reverse:t.reverse,"time-mod":t.timeMod,"next-review":t.nextReview,"total-reviews":t.totalReviews,created:t.created,ok:t.ok,again:t.again,"for-study":!0,"show-back":t.showBack,set:t.set,"image-u-r-l":t.imageURL,examples:t.examples},on:{showBack:t.showBackAction}}),t._v(" "),e("div",{staticClass:"buttonlist primary"},[t.showBack?[void 0!==t.timeBonuses.again?e("button",{key:"again",on:{click:function(e){return t.answer("again")}}},[t._v("\n        Wrong\n        "),e("span",{staticClass:"sub"},[e("span",{staticClass:"fade"},[t._v(t._s(t.msToString(0,!0)))])]),t._v(" "),t._m(1)]):t._e(),t._v(" "),t.timeBonuses.hard?e("button",{key:"hard",on:{click:function(e){return t.answer("hard")}}},[t._v("\n        Hard\n        "),e("span",{staticClass:"sub"},[e("span",{staticClass:"fade"},[t._v("~"+t._s(t.msToString(t.timeBonuses.hard,!0)))])]),t._v(" "),t._m(2)]):t._e(),t._v(" "),t.timeBonuses.ok?e("button",{key:"ok",on:{click:function(e){return t.answer("ok")}}},[t._v("\n        Right\n        "),e("span",{staticClass:"sub"},[e("span",{staticClass:"fade"},[t._v("~"+t._s(t.msToString(t.timeBonuses.ok,!0)))])]),t._v(" "),e("div",[e("kbd",{staticClass:"keyicon"},[t._v("3")]),t._v(" "),t.isMobile?t._e():e("span",[t._v("/")]),t._v(" "),e("kbd",{staticClass:"keyicon"},[t._v("Space")])])]):t._e()]:e("button",{key:"showback",staticClass:"showback",on:{click:t.showBackAction}},[t._v("\n      Show Back\n      "),t._m(0)])],2),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"centertext"},[e("button",{staticStyle:{"padding-right":"15%","padding-left":"15%"},on:{click:function(e){return t.$emit("postpone")}}},[t._v("\n      Postpone\n      "),t._m(3)])])],1)}),[function(){var t=this._self._c;return t("div",[t("kbd",{staticClass:"keyicon"},[this._v("Space")])])},function(){var t=this._self._c;return t("div",[t("kbd",{staticClass:"keyicon"},[this._v("1")])])},function(){var t=this._self._c;return t("div",[t("kbd",{staticClass:"keyicon"},[this._v("2")])])},function(){var t=this._self._c;return t("div",[t("span",{staticClass:"keyicon"},[this._v("P")])])}],!1,null,"26c7bafa",null);e.default=component.exports;installComponents(component,{AutoSpeaker:n(310).default,Card:n(321).default})},335:function(t,e,n){"use strict";var o=n(2),r=n(3),c=n(56),d=n(209),h=n(208),l=n(4),v=RangeError,f=String,m=Math.floor,w=r(h),k=r("".slice),_=r(1..toFixed),y=function(t,e,n){return 0===e?n:e%2==1?y(t,e-1,n*t):y(t*t,e/2,n)},T=function(data,t,e){for(var n=-1,o=e;++n<6;)o+=t*data[n],data[n]=o%1e7,o=m(o/1e7)},S=function(data,t){for(var e=6,n=0;--e>=0;)n+=data[e],data[e]=m(n/t),n=n%t*1e7},B=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var e=f(data[t]);s=""===s?e:s+w("0",7-e.length)+e}return s};o({target:"Number",proto:!0,forced:l((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!l((function(){_({})}))},{toFixed:function(t){var e,n,o,r,h=d(this),l=c(t),data=[0,0,0,0,0,0],m="",_="0";if(l<0||l>20)throw v("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return f(h);if(h<0&&(m="-",h=-h),h>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(h*y(2,69,1))-69)<0?h*y(2,-e,1):h/y(2,e,1),n*=4503599627370496,(e=52-e)>0){for(T(data,0,n),o=l;o>=7;)T(data,1e7,0),o-=7;for(T(data,y(10,o,1),0),o=e-1;o>=23;)S(data,1<<23),o-=23;S(data,1<<o),T(data,1,1),S(data,2),_=B(data)}else T(data,0,n),T(data,1<<-e,0),_=B(data)+w("0",l);return _=l>0?m+((r=_.length)<=l?"0."+w("0",l-r)+_:k(_,0,r-l)+"."+k(_,r-l)):m+_}})},336:function(t,e,n){"use strict";n(313)},337:function(t,e,n){var o=n(116)((function(i){return i[1]}));o.push([t.i,".card[data-v-26c7bafa]{margin-bottom:20px}.showback[data-v-26c7bafa]{width:100%}@media(max-width:768px){.buttonlist.primary[data-v-26c7bafa]{border-bottom:none;border-radius:0;bottom:0;left:0;position:relative;position:fixed;width:100%;z-index:1000}.buttonlist.primary button[data-v-26c7bafa]{background:#eee;border-radius:0}.buttonlist.primary button[data-v-26c7bafa]:hover{background:#ddd}}",""]),o.locals={},t.exports=o}}]);