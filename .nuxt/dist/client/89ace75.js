(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{318:function(e,t,n){"use strict";n.r(t);n(25),n(52),n(142),n(47);var o=n(394)({breaks:!0,html:!0,typographer:!0});var l={props:{text:{required:!1,default:"",type:String},lineBreaksAllowed:{required:!1,default:!0,type:Boolean},acceptBlank:{required:!1,default:!1,type:Boolean},disableEdits:{required:!1,default:!1,type:Boolean},placeholder:{required:!1,default:"",type:String},focus:{required:!1,default:!1,type:Boolean}},components:{},data:function(){return{displayText:this.text,isEditing:!1,metaDown:!1,shiftDown:!1,isPlaceholder:0===this.text.length}},model:{prop:"text",event:"changeText"},computed:{displayMarkdown:function(){return(this.displayText.length>0?this.displayText:this.text).split("\n").map((function(e){return o.render(e)||"<br />"})).join("").replace(/(<br \/>)*$/,"")}},watch:{text:function(e){this.isPlaceholder=0===e.length,this.isEditing||this.resetTextTo(e)},disableEdits:function(e){this.isEditing=!1,this.metaDown=!1,this.shiftDown=!1},focus:function(e){var t=this;e&&this.$nextTick((function(){t.startEdit()}))}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp),this.isPlaceholder&&(this.displayText=this.placeholder),this.focus&&this.startEdit()},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown),window.removeEventListener("keyup",this.keyUp)},methods:{startEdit:function(){var e=this;this.isEditing||this.disableEdits||(this.isEditing=!0,this.isPlaceholder&&(this.displayText=""),this.isPlaceholder=!1,this.metaDown=!1,this.shiftDown=!1,this.$nextTick((function(){e.$el.focus(),e.$nextTick(e.selectText)})),this.$emit("startEdit",this.displayText))},resetTextTo:function(e){var t=this;this.displayText="",this.$el.innerHTML="",this.$nextTick((function(){t.displayText=e,e||!t.placeholder||t.isEditing||(t.displayText=t.placeholder,t.isPlaceholder=!0)}))},commitEdit:function(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),this.isEditing=!1,this.metaDown=!1,this.shiftDown=!1;var e=this.sanitize(this.$el.innerHTML);e.length>0?(this.displayText=e,this.$emit("endEdit",e)):this.resetTextTo(this.text)},keyDown:function(e){this.isEditing&&!this.disableEdits&&("Meta"===e.key&&(this.metaDown=!0),"Shift"===e.key&&(this.shiftDown=!0),"Enter"!==e.key||this.lineBreaksAllowed||this.commitEdit(),"Enter"===e.key&&this.metaDown&&this.commitEdit(),"Tab"===e.key&&this.shiftDown&&this.$emit("prev",e),"Tab"===e.key&&this.$emit("next",e),"Escape"===e.key&&(this.resetTextTo(this.text),this.$nextTick(this.commitEdit)))},keyUp:function(e){this.isEditing&&!this.disableEdits&&("Meta"===e.key&&(this.metaDown=!1),"Shift"===e.key&&(this.shiftDown=!1))},selectText:function(){if(document.body.createTextRange){var e=document.body.createTextRange();e.moveToElementText(this.$el),e.select()}else if(window.getSelection){var t=window.getSelection(),n=document.createRange();n.selectNodeContents(this.$el),t.removeAllRanges(),t.addRange(n)}},sanitize:function(text){return text.replace(/<div>/g,"\n").replace(/\n<br ?\/?>/g,"\n").replace(/<br ?\/?>/g,"\n").replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/^[\s\n\t]*/g,"")},paste:function(e){e.stopPropagation(),e.preventDefault();var t=e.clipboardData||window.clipboardData,n=this.sanitize(t.getData("Text"));if(/.(jpe?g|png|gif|webm|bmp)$/gi.test(n))return this.$emit("setImageURL",n);if(/^data:/gi.test(n))return alert("that's image data, not a link! make sure you get an image url that ends in .jpg, .png, .gif, etc.");var o,l,d,r,c,h=document.activeElement.innerText,f=(o=this.$el,l=function(){var e=window.getSelection();if(null!=e&&e.rangeCount>0){var t=e.getRangeAt(0);return{start:d(o,t.startContainer,t.startOffset),end:d(o,t.endContainer,t.endOffset)}}return null},d=function e(t,n,o){var l=0;if("#text"===n.nodeName)l+=o;else for(var i=0;i<o;i++)l+=r(n.childNodes[i]);return n!==t&&(l+=e(t,n.parentNode,c(n))),l},r=function e(t){var n=0;if("BR"===t.nodeName)n=1;else if("#text"===t.nodeName)n=t.nodeValue.length;else if(null!==t.childNodes)for(var i=0;i<t.childNodes.length;i++)n+=e(t.childNodes[i]);return n},c=function e(t){return null==t?-1:1+e(t.previousSibling)},l(document.activeElement)),m=h.substring(0,f.start)+n+h.substring(f.end);this.displayText=m,this.$emit("changeText",m),this.$nextTick(this.moveCursorToEnd)},moveCursorToEnd:function(){var e,t;document.createRange?((e=document.createRange()).selectNodeContents(this.$el),e.collapse(!1),(t=window.getSelection()).removeAllRanges(),t.addRange(e)):document.selection&&((e=document.body.createTextRange()).moveToElementText(this.$el),e.collapse(!1),e.select())}}},d=(n(370),n(50)),component=Object(d.a)(l,(function(){var e=this;return(0,e._self._c)("div",{staticClass:"editabletext",class:{editabletextediting:e.isEditing,placeholder:e.isPlaceholder},attrs:{contenteditable:e.isEditing,tabindex:"0"},domProps:{innerHTML:e._s(e.isEditing?e.displayText:e.displayMarkdown)},on:{focus:e.startEdit,click:e.startEdit,input:function(t){e.$emit("changeText",e.sanitize(e.$el.innerHTML))},blur:e.commitEdit,paste:e.paste}})}),[],!1,null,null,null);t.default=component.exports},345:function(e,t,n){var content=n(371);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(116).default)("4dd496eb",content,!0,{sourceMap:!1})},370:function(e,t,n){"use strict";n(345)},371:function(e,t,n){var o=n(115)((function(i){return i[1]}));o.push([e.i,'.editabletext.editabletextediting:empty:before{content:"\ufeff"}.editabletext{cursor:pointer;white-space:normal}.editabletext.placeholder{color:rgba(0,0,0,.2)}.editabletext.editabletextediting{cursor:text;white-space:pre-wrap}.editabletext div,.editabletext h1,.editabletext h2,.editabletext h3,.editabletext h4,.editabletext ol,.editabletext p,.editabletext ul{margin:0;padding:0}.editabletext ol,.editabletext ul{padding:0 10%;text-align:left}',""]),o.locals={},e.exports=o}}]);