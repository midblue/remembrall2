(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{351:function(t,e,n){var content=n(387);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(116).default)("451e4594",content,!0,{sourceMap:!1})},369:function(t,e,n){"use strict";n.r(e);n(35),n(204),n(14);var r=n(19),o=(n(36),n(85),n(86),n(87),n(206).get),d=n(205).getNumberDueInSet,c={components:{},props:{},data:function(){return{isLoading:!1,inputUsername:"",dueReviews:{},setPickerOpen:!1}},computed:Object(r.a)({currentUser:function(){return this.$store.state.currentUser},appState:function(){return this.$store.state.appState},setList:function(){return this.$store.state.setList||[]},setListWithoutCurrentSet:function(){var t=this;return this.setList.filter((function(s){return s.id!==t.currentSetId}))},currentSetId:function(){return this.$store.state.currentSetId},currentCards:function(){var t,e,n=this;return null!==(t=this.$store.state.setList)&&void 0!==t&&t.find((function(s){return s.id===n.$store.state.currentSetId}))?null===(e=this.$store.state.setList)||void 0===e?void 0:e.find((function(s){return s.id===n.$store.state.currentSetId})).cards:[]},isMobile:function(){return this.$store.state.isMobile}},"appState",(function(){return this.$store.state.appState})),watch:{currentUser:function(t){this.isLoading=!1;var e=o("currentSetId");e&&""!==e&&this.$store.commit("setCurrentSetId",e),t||this.$nextTick(this.focusInput)},setList:function(){this.isLoading=!1,this.updateDueReviews()},currentCards:function(){this.updateDueReviews()},currentSetId:function(){this.isLoading=!1,this.updateDueReviews()},setPickerOpen:function(t){t?window.addEventListener("click",this.checkClickToClose):window.removeEventListener("click",this.checkClickToClose)}},mounted:function(){window.addEventListener("keydown",this.keyDown),this.updateDueReviews(),window.setInterval(this.updateDueReviews,6e5);var t=o("currentUser");t&&""!==t?(this.$store.dispatch("logInAs",t),this.isLoading=!0):this.$nextTick(this.focusInput)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyDown)},methods:{logInAs:function(){""!==this.inputUserName&&(this.isLoading=!0,this.$store.dispatch("logInAs",this.inputUsername))},logOut:function(){this.$store.commit("logOut")},keyDown:function(t){if(this.currentUser)return this.updateDueReviews();"Enter"===t.key&&this.logInAs()},focusInput:function(){this.$refs.usernameInput.focus()},switchSet:function(t){this.$store.commit("setCurrentSetId",t)},updateDueReviews:function(){for(var t in this.dueReviews={},this.setList){var e;null!==(e=this.setList)&&void 0!==e&&e[t]&&(new Date(this.setList[t].lastUpdated).getDate()!==(new Date).getDate()&&this.$store.commit("resetSetDay",t),this.dueReviews[this.setList[t].id]=d(this.setList[t]))}},checkClickToClose:function(t){(t.composedPath?t.composedPath():t.path).includes(this.$refs.mainButton)||(this.setPickerOpen=!1)},uploaded:function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onload=function(t){var n=JSON.parse(t.target.result);e.$store.commit("uploadSet",n)},r.readAsText(n)}}},l=(n(386),n(50)),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"userandsetpicker",class:{fullscreen:!t.currentUser||t.isLoading,vertical:!t.currentUser}},[e("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{type:"file",accept:".json"},on:{change:t.uploaded}}),t._v(" "),t.currentUser||t.isLoading?t.isLoading?[e("div",{staticClass:"sub"},[t._v("Loading...")])]:[t.isMobile?e("div",{ref:"mainButton",staticClass:"buttonlist fullheight"},["user"===t.appState?e("button",{staticClass:"mainbutton",on:{click:function(e){return t.$store.commit("setAppState","study")}}},[t._v("\n        ← Back to Studying\n      ")]):t.setList.find((function(s){return s.id===t.currentSetId}))?e("button",{key:t.currentSetId,staticClass:"mainbutton",class:{open:t.setPickerOpen},staticStyle:{position:"relative"},on:{click:function(e){t.setPickerOpen=!t.setPickerOpen}}},[t._v("\n        "+t._s(t.setList.find((function(s){return s.id===t.currentSetId})).name)+" ▾\n        "),t.setPickerOpen?e("div",{staticClass:"secondarypanel"},[t._l(t.setListWithoutCurrentSet,(function(n){return e("button",{key:n.id,class:{duecards:t.dueReviews[n.id]>0},on:{click:function(e){return t.switchSet(n.id)}}},[t._v("\n            "+t._s(n.name)+"\n          ")])})),t._v(" "),e("button",{on:{click:function(e){return t.$refs.uploader.click()}}},[t._v("Upload Set")]),t._v(" "),e("button",{on:{click:function(e){return t.$store.commit("addSet")}}},[t._v("+ Add Set")])],2):t._e()]):e("button",{on:{click:function(e){return t.$store.commit("addSet")}}},[t._v("\n        + Add Set\n      ")])]):e("div",{staticClass:"buttonlist fullheight inlineblock"},[t._l(t.setList,(function(n){return e("button",{key:n.id,class:{active:t.currentSetId===n.id&&"user"!==t.appState},on:{click:function(e){return t.switchSet(n.id)}}},[t._v("\n        "+t._s(n.name)+"\n        "),!t.isMobile&&t.dueReviews[n.id]>0&&t.currentSetId!==n.id||"user"===t.appState?e("span",{staticClass:"sub"},[t._v("\n          ("+t._s(t.dueReviews[n.id])+")\n        ")]):t._e()])})),t._v(" "),e("button",{on:{click:function(e){return t.$refs.uploader.click()}}},[t._v("Upload Set")]),t._v(" "),e("button",{on:{click:function(e){return t.$store.commit("addSet")}}},[t._v("Add Set")])],2),t._v(" "),e("div",{staticClass:"flex-ai"},[e("div",{staticClass:"buttonlist fullheight inlineblock"},[e("button",{class:{active:"user"===t.appState},on:{click:function(e){return t.$store.commit("setAppState","user")}}},[t._v("\n          "+t._s(t.currentUser))]),t.isMobile?t._e():e("button",{on:{click:t.logOut}},[t._v("Log out")])])])]:[t._m(0),t._v(" "),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputUsername,expression:"inputUsername"}],ref:"usernameInput",staticClass:"username",attrs:{autocorrect:"off",autocapitalize:"off",placeholder:"username"},domProps:{value:t.inputUsername},on:{input:function(e){e.target.composing||(t.inputUsername=e.target.value)}}})]),t._v(" "),e("div",[e("button",{staticClass:"loginbutton",on:{click:t.logInAs}},[t._v("Go")])])]],2)}),[function(){var t=this._self._c;return t("h1",[t("b",[this._v("Enter your username.")])])}],!1,null,"1a04294d",null);e.default=component.exports},386:function(t,e,n){"use strict";n(351)},387:function(t,e,n){var r=n(115)((function(i){return i[1]}));r.push([t.i,'.userandsetpicker[data-v-1a04294d]{align-items:center;background:#333;display:flex;height:43px;justify-content:space-between;padding:3px 50px 0;position:relative;width:100%;z-index:12}@media(max-width:768px){.userandsetpicker[data-v-1a04294d]{height:40px;padding:0 20px}}.userandsetpicker.fullscreen[data-v-1a04294d]{background:#eee;height:100vh;justify-content:center;position:fixed}.userandsetpicker.vertical[data-v-1a04294d]{flex-direction:column}.userandsetpicker.vertical>*[data-v-1a04294d]{margin-bottom:20px}.username[data-v-1a04294d]{border:1px solid #eee;border-radius:7px;padding:10px}.loginbutton[data-v-1a04294d],.username[data-v-1a04294d]{font-family:"Avenir Neue","Avenir","Helvetica",sans-serif;font-size:1.2rem}.loginbutton[data-v-1a04294d]{border-radius:7px;padding:20px 50px}button:not(.active).duecards[data-v-1a04294d]{background:#fd8}.inlineblock[data-v-1a04294d]{display:inline-block}.flex-ai[data-v-1a04294d]{align-items:center;display:flex;height:100%;justify-content:center}.buttonlist[data-v-1a04294d]{overflow:visible}.buttonlist.fullheight[data-v-1a04294d]{border:none;border-radius:0;height:100%}.buttonlist.fullheight button[data-v-1a04294d]{background:hsla(0,0%,100%,0);border:none;box-shadow:none;color:#fff;transition:background .2s}@media(min-width:769px){.buttonlist.fullheight button[data-v-1a04294d]{border-top-left-radius:5px;border-top-right-radius:5px;padding:0 15px 2px}}.buttonlist.fullheight button[data-v-1a04294d]:hover{background:rgba(0,153,204,.3)}.buttonlist.fullheight button.active[data-v-1a04294d]{background:#fff;color:#000}@media(max-width:768px){.buttonlist.fullheight button[data-v-1a04294d]{background:hsla(0,0%,100%,.2);margin-right:3px}}.buttonlist.fullheight>*[data-v-1a04294d]{border-radius:0;height:100%}button.mainbutton[data-v-1a04294d]{box-shadow:0 0 1000px 1000px transparent;min-width:25vw;position:relative;transition:box-shadow .3s;z-index:100}button.open[data-v-1a04294d]{background:#fff!important;border-bottom-left-radius:0!important;border-bottom-right-radius:0!important;box-shadow:0 0 1000px 1000px rgba(0,0,0,.3);color:#000!important}.secondarypanel[data-v-1a04294d]{left:0;position:absolute;top:100%;width:100%}.secondarypanel button[data-v-1a04294d]{background:#ddd!important;border:0;border-radius:0;border-top:1px solid #eee;color:#000!important;width:100%}.secondarypanel button[data-v-1a04294d]:first-of-type{border-radius:0}.secondarypanel button[data-v-1a04294d]:last-of-type{border-radius:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px}',""]),r.locals={},t.exports=r}}]);